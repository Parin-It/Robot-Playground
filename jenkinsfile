pipeline{
    agent any

    stages{
        stage('Running Test'){
            steps{
                sh 'robot -d result TestCase.robot'
                script{
                    common = load "common.groovy"
                    common.updateGithubStatus("pending")
                    echo "test"
                }
            }
        }
    }

    post{
        always{
            script{
                if("${currentBuild.currentResult}" == 'SUCCESS'){
                    common.updateGithubStatus("success")
                }else{
                    common.updateGithubStatus("failure")
                }
            }
        }
    }

}